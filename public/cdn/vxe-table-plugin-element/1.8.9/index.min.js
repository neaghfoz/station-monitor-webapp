!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-element",["exports","xe-utils"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"));else{var n={exports:{}};t(n.exports,e.XEUtils),e.VXETablePluginElement=n.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,w){"use strict";var t;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return null==e||""===e}function l(){return"value"}function c(e,t){return e&&t.valueFormat?w.default.toStringDate(e,t.valueFormat):e}function d(e,t,n){return w.default.toDateString(c(e,t),t.format||n)}function p(e,t,n,r){return w.default.map(e,function(e){return d(e,t,r)}).join(n)}function u(e,t,n,r){return(e=d(e,n,r))>=d(t[0],n,r)&&e<=d(t[1],n,r)}function b(e,t,n,r){var o=t.$table.vSize;return w.default.assign(o?{size:o}:{},r,e.props,a({},l(),n))}function h(e,t,n,r){var o=t.$form.vSize;return w.default.assign(o?{size:o}:{},r,e.props,a({},l(),n))}function E(e,o){var t=e.nativeEvents,n={};return w.default.objectEach(t,function(r,e){n[e]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o].concat(t))}}),n}function i(e,o,t,r){var a=e.events,n="input",l=function(e){var t="change";switch(e.name){case"ElAutocomplete":t="select";break;case"ElInput":case"ElInputNumber":t="input"}return t}(e),i=l===n,u={};return w.default.objectEach(a,function(r,e){u[e]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o].concat(t))}}),t&&(u[n]=function(e){t(e),a&&a[n]&&a[n](o,e),i&&r&&r(e)}),!i&&r&&(u[l]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,t),a&&a[l]&&a[l].apply(a,[o].concat(t))}),u}function M(e,t){var n=t.$table,r=t.row,o=t.column;return i(e,t,function(e){w.default.set(r,o.property,e)},function(){n.updateStatus(t)})}function m(e,t,n,r){return i(e,t,function(e){n.data=e},r)}function k(e,t){var n=t.$form,r=t.data,o=t.property;return i(e,t,function(e){w.default.set(r,o,e)},function(){n.updateStatus(t)})}function r(e,t){var n,o,r=e.options,a=void 0===r?[]:r,l=e.optionGroups,i=e.props,u=void 0===i?{}:i,d=e.optionProps,p=void 0===d?{}:d,f=e.optionGroupProps,c=void 0===f?{}:f,s=t.row,v=t.column,m=t.$table,y=p.label||"label",g=p.value||"value",b=c.options||"options",h=w.default.get(s,v.property),E=v.id;if(u.filterable){var M=m.fullAllDataRowMap;if(M.has(s)&&(n=M.get(s),o=(o=n.cellData)||(M.get(s).cellData={})),n&&o[E]&&o[E].value===h)return o[E].label}return x(h)?null:w.default.map(u.multiple?h:[h],l?function(t){for(var e,n=0;n<l.length&&!(e=w.default.find(l[n][b],function(e){return e[g]===t}));n++);var r=e?e[y]:t;return o&&a&&a.length&&(o[E]={value:h,label:r}),r}:function(t){var e=w.default.find(a,function(e){return e[g]===t}),n=e?e[y]:t;return o&&a&&a.length&&(o[E]={value:h,label:n}),n}).join(", ")}function o(e,t){var n=e.props,r=void 0===n?{}:n,o=t.row,a=t.column,l=w.default.get(o,a.property)||[],i=[];return function t(n,e,r,o){var a=r[n];e&&r.length>n&&w.default.each(e,function(e){e.value===a&&(o.push(e.label),t(++n,e.children,r,o))})}(0,r.options,l,i),(!1===r.showAllLevels?i.slice(i.length-1,i.length):i).join(" ".concat(r.separator||"/"," "))}function f(e,t){var n=e.props,r=void 0===n?{}:n,o=t.row,a=t.column,l=r.rangeSeparator,i=void 0===l?"-":l,u=w.default.get(o,a.property);switch(r.type){case"week":u=d(u,r,"yyyywWW");break;case"month":u=d(u,r,"yyyy-MM");break;case"year":u=d(u,r,"yyyy");break;case"dates":u=p(u,r,", ","yyyy-MM-dd");break;case"daterange":u=p(u,r," ".concat(i," "),"yyyy-MM-dd");break;case"datetimerange":u=p(u,r," ".concat(i," "),"yyyy-MM-dd HH:ss:mm");break;case"monthrange":u=p(u,r," ".concat(i," "),"yyyy-MM");break;default:u=d(u,r,"yyyy-MM-dd")}return u}function s(e,t){var n=e.props,r=void 0===n?{}:n,o=t.row,a=t.column,l=r.isRange,i=r.format,u=void 0===i?"hh:mm:ss":i,d=r.rangeSeparator,p=void 0===d?"-":d,f=w.default.get(o,a.property);return f&&l&&(f=w.default.map(f,function(e){return w.default.toDateString(c(e,r),u)}).join(" ".concat(p," "))),w.default.toDateString(c(f,r),u)}function n(i){return function(e,t,n){var r=n.row,o=n.column,a=t.attrs,l=w.default.get(r,o.property);return[e(t.name,{attrs:a,props:b(t,n,l,i),on:M(t,n),nativeOn:E(t,n)})]}}function v(e,t,n){return[e("el-button",{attrs:t.attrs,props:b(t,n,null),on:i(t,n),nativeOn:E(t,n)},D(e,t.content))]}function y(d){return function(r,o,a){var e=a.column,l=o.name,i=o.attrs,u=E(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(l,{key:t,attrs:i,props:b(o,a,n,d),on:m(o,a,e,function(){g(a,!!e.data,e)}),nativeOn:u})}))]}}function g(e,t,n){e.$panel.changeOption({},t,n)}function I(e){var t=e.option,n=e.row,r=e.column,o=t.data;return w.default.get(n,r.property)==o}function O(n,e,t){var r=t.label||"label",o=t.value||"value",a=t.disabled||"disabled";return w.default.map(e,function(e,t){return n("el-option",{key:t,props:{value:e[o],label:e[r],disabled:e[a]}})})}function D(e,t){return[""+(x(t)?"":t)]}function P(a){return function(e,t,n){var r=n.data,o=n.property;return[e(t.name,{attrs:t.attrs,props:h(t,n,w.default.get(r,o),a),on:k(t,n),nativeOn:E(t,n)})]}}function S(e,t,n){var r=t.attrs,o=h(t,n,null);return[e("el-button",{attrs:r,props:o,on:i(t,n),nativeOn:E(t,n)},D(0,t.content||o.content))]}function _(t,e){var n=e?"editRender":"cellRender";return function(e){return t(e.column[n],e)}}function F(){return function(n,e,t){var r=e.name,o=e.options,a=void 0===o?[]:o,l=e.optionProps,i=void 0===l?{}:l,u=e.attrs,d=t.data,p=t.property,f=i.label||"label",c=i.value||"value",s=i.disabled||"disabled",v=w.default.get(d,p);return[n("".concat(r,"Group"),{attrs:u,props:h(e,t,v),on:k(e,t),nativeOn:E(e,t)},a.map(function(e,t){return n(r,{key:t,props:{label:e[c],disabled:e[s]}},e[f])}))]}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginElement=void 0,w=(t=w)&&t.__esModule?t:{default:t};var A={ElAutocomplete:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:y(),filterMethod:I,renderItem:P()},ElInput:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:y(),filterMethod:I,renderItem:P()},ElInputNumber:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:y(),filterMethod:I,renderItem:P()},ElSelect:{renderEdit:function(n,e,t){var r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.optionProps,i=void 0===l?{}:l,u=e.optionGroupProps,d=void 0===u?{}:u,p=t.row,f=t.column,c=e.attrs,s=b(e,t,w.default.get(p,f.property)),v=M(e,t),m=E(e,t);if(a){var y=d.options||"options",g=d.label||"label";return[n("el-select",{attrs:c,props:s,on:v,nativeOn:m},w.default.map(a,function(e,t){return n("el-option-group",{key:t,props:{label:e[g]}},O(n,e[y],i))}))]}return[n("el-select",{props:s,attrs:c,on:v,nativeOn:m},O(n,o,i))]},renderCell:function(e,t,n){return D(0,r(t,n))},renderFilter:function(o,a,l){var e=a.options,i=void 0===e?[]:e,u=a.optionGroups,t=a.optionProps,d=void 0===t?{}:t,n=a.optionGroupProps,r=void 0===n?{}:n,p=r.options||"options",f=r.label||"label",c=l.column,s=a.attrs,v=E(a,l);return[o("div",{class:"vxe-table--filter-element-wrapper"},u?c.filters.map(function(e,t){var n=e.data,r=b(a,l,n);return o("el-select",{key:t,attrs:s,props:r,on:m(a,l,e,function(){g(l,r.multiple?e.data&&0<e.data.length:!w.default.eqNull(e.data),e)}),nativeOn:v},w.default.map(u,function(e,t){return o("el-option-group",{key:t,props:{label:e[f]}},O(o,e[p],d))}))}):c.filters.map(function(e,t){var n=e.data,r=b(a,l,n);return o("el-select",{key:t,attrs:s,props:r,on:m(a,l,e,function(){g(l,r.multiple?e.data&&0<e.data.length:!w.default.eqNull(e.data),e)}),nativeOn:v},O(o,i,d))}))]},filterMethod:function(e){var t=e.option,n=e.row,r=e.column,o=t.data,a=r.property,l=r.filterRender.props,i=void 0===l?{}:l,u=w.default.get(n,a);return i.multiple?w.default.isArray(u)?w.default.includeArrays(u,o):-1<o.indexOf(u):u==o},renderItem:function(n,e,t){var r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.optionProps,i=void 0===l?{}:l,u=e.optionGroupProps,d=void 0===u?{}:u,p=t.data,f=t.property,c=e.attrs,s=h(e,t,w.default.get(p,f)),v=k(e,t),m=E(e,t);if(a){var y=d.options||"options",g=d.label||"label";return[n("el-select",{attrs:c,props:s,on:v,nativeOn:m},w.default.map(a,function(e,t){return n("el-option-group",{props:{label:e[g]},key:t},O(n,e[y],i))}))]}return[n("el-select",{attrs:c,props:s,on:v,nativeOn:m},O(n,o,i))]},cellExportMethod:_(r),editCellExportMethod:_(r,!0)},ElCascader:{renderEdit:n(),renderCell:function(e,t,n){return D(0,o(t,n))},renderItem:P(),cellExportMethod:_(o),editCellExportMethod:_(o,!0)},ElDatePicker:{renderEdit:n(),renderCell:function(e,t,n){return D(0,f(t,n))},renderFilter:function(r,o,a){var e=a.column,l=o.attrs,i=E(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(o.name,{key:t,attrs:l,props:b(o,a,n),on:m(o,a,e,function(){g(a,!!e.data,e)}),nativeOn:i})}))]},filterMethod:function(e){var t=e.option,n=e.row,r=e.column,o=t.data,a=r.filterRender.props,l=void 0===a?{}:a,i=w.default.get(n,r.property);if(o)switch(l.type){case"daterange":return u(i,o,l,"yyyy-MM-dd");case"datetimerange":return u(i,o,l,"yyyy-MM-dd HH:ss:mm");case"monthrange":return u(i,o,l,"yyyy-MM");default:return i===o}return!1},renderItem:P(),cellExportMethod:_(f),editCellExportMethod:_(f,!0)},ElTimePicker:{renderEdit:n(),renderCell:function(e,t,n){return[s(t,n)]},renderItem:P(),cellExportMethod:_(s),editCellExportMethod:_(s,!0)},ElTimeSelect:{renderEdit:n(),renderItem:P()},ElRate:{renderDefault:n(),renderEdit:n(),renderFilter:y(),filterMethod:I,renderItem:P()},ElSwitch:{renderDefault:n(),renderEdit:n(),renderFilter:function(r,o,a){var e=a.column,l=o.name,i=o.attrs,u=E(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(l,{key:t,attrs:i,props:b(o,a,n),on:m(o,a,e,function(){g(a,w.default.isBoolean(e.data),e)}),nativeOn:u})}))]},filterMethod:I,renderItem:P()},ElSlider:{renderDefault:n(),renderEdit:n(),renderFilter:y(),filterMethod:I,renderItem:P()},ElRadio:{renderItem:F()},ElCheckbox:{renderItem:F()},ElButton:{renderDefault:v,renderItem:S},ElButtons:{renderDefault:function(t,e,n){return e.children.map(function(e){return v(t,e,n)[0]})},renderItem:function(t,e,n){return e.children.map(function(e){return S(t,e,n)[0]})}}};function C(e,t,n){for(var r,o=e.target;o&&o.nodeType&&o!==document;){if(n&&o.className&&o.className.split&&-1<o.className.split(" ").indexOf(n))r=o;else if(o===t)return{flag:!n||!!r,container:t,targetElem:r};o=o.parentNode}return{flag:!1}}function T(e,t){var n=document.body,r=e.$event||t;if(C(r,n,"el-autocomplete-suggestion").flag||C(r,n,"el-select-dropdown").flag||C(r,n,"el-cascader__dropdown").flag||C(r,n,"el-cascader-menus").flag||C(r,n,"el-time-panel").flag||C(r,n,"el-picker-panel").flag||C(r,n,"el-color-dropdown").flag)return!1}var G={install:function(e){var t=e.interceptor;e.renderer.mixin(A),t.add("event.clearFilter",T),t.add("event.clearActived",T)}};e.VXETablePluginElement=G,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use(G);var j=G;e.default=j});
